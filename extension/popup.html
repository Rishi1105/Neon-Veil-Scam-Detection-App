<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Neon Veil</title>
    <style>
      :root {
        color-scheme: dark;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif;
        background: #0b0b0f;
        color: #e5e7eb;
        width: 340px;
        min-height: 380px;
        background-image: radial-gradient(120px 120px at 10% 10%, rgba(34,211,238,.15), transparent), radial-gradient(140px 140px at 90% 90%, rgba(236,72,153,.15), transparent);
      }
      .container {
        padding: 14px;
      }
      .title {
        font-weight: 800;
        letter-spacing: .08em;
        color: #67e8f9;
        text-shadow: 0 0 8px rgba(34,211,238,.6);
        margin: 0 0 4px 0;
      }
      .subtitle { color:#9ca3af; font-size: 12px; margin-bottom: 12px; }
      textarea {
        width: 100%;
        min-height: 120px;
        background: rgba(0,0,0,.5);
        border: 1px solid rgba(34,211,238,.35);
        color: #e5e7eb;
        border-radius: 8px;
        padding: 10px;
        resize: vertical;
      }
      .btn {
        width: 100%;
        margin-top: 10px;
        background: linear-gradient(90deg, #0891b2, #2563eb);
        color: white; border: 0; padding: 10px 12px; border-radius: 8px; font-weight: 700; cursor: pointer;
        box-shadow: 0 0 12px rgba(34,211,238,.35);
      }
      .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; }
      .card { border: 1px solid rgba(34,211,238,.35); background: rgba(0,0,0,.5); border-radius: 8px; padding: 10px; }
      .label { color:#9ca3af; font-size: 12px; }
      .val { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, monospace; }
      .list { margin-top: 8px; }
      .list div { display:flex; gap:6px; align-items:center; font-size: 12px; color:#d1d5db; }
      .dot { width: 6px; height: 6px; background: #f59e0b; border-radius: 9999px; display:inline-block; }
      .classification { font-weight: 800; }
      .SAFE { color:#34d399; text-shadow: 0 0 6px rgba(16,185,129,.5); }
      .SUSPICIOUS { color:#fbbf24; text-shadow: 0 0 6px rgba(251,191,36,.5); }
      .DANGEROUS { color:#f87171; text-shadow: 0 0 6px rgba(248,113,113,.5); }
      .CRITICAL { color:#f472b6; text-shadow: 0 0 6px rgba(236,72,153,.6); }
      .small { font-size: 11px; color:#9ca3af; margin-top: 6px; display:flex; justify-content: space-between; }
      .recent { max-height: 120px; overflow:auto; }
    </style>
  </head>
  <body>
    <div class="container">
      <h1 class="title">NEON VEIL</h1>
      <div class="subtitle">Scam Detection // Popup Analyzer</div>

      <div class="card" style="margin-bottom: 12px;">
        <div class="label">TODAY'S STATISTICS</div>
        <div style="display:grid; grid-template-columns: 1fr; gap:8px; margin-top:6px;">
          <div class="card" style="background:#0b0f19; border:1px solid rgba(0,255,255,.2);">
            <div style="font-weight:800; color:#7dd3fc; font-size:22px;" id="statSites">0</div>
            <div style="color:#9ca3af; font-size:12px;">Sites Analyzed</div>
          </div>
          <div class="card" style="background:#0b0f19; border:1px solid rgba(0,255,255,.2);">
            <div style="font-weight:800; color:#7dd3fc; font-size:22px;" id="statScams">0</div>
            <div style="color:#9ca3af; font-size:12px;">Scams Detected</div>
          </div>
          <div class="card" style="background:#0b0f19; border:1px solid rgba(0,255,255,.2);">
            <div style="font-weight:800; color:#7dd3fc; font-size:22px;" id="statWarnings">0</div>
            <div style="color:#9ca3af; font-size:12px;">Warnings Issued</div>
          </div>
        </div>
        <div style="display:flex; flex-direction:column; gap:6px; margin-top:8px;">
          <button id="analyzeNowBtn" class="btn" style="width:100%; padding:8px 10px; background:linear-gradient(90deg,#0ea5e9,#7c3aed);">Analyze Current Site</button>
          <button id="viewLogsBtn" class="btn" style="width:100%; padding:8px 10px;">View Logs</button>
          <button id="gotoSettingsBtn" class="btn" style="width:100%; padding:8px 10px;">Settings</button>
          <button id="resetTodayBtn" class="btn" style="width:100%; padding:8px 10px; background:linear-gradient(90deg,#ef4444,#f472b6);">Reset Today</button>
          <div class="card" style="background:#0b0f19; border:1px solid rgba(0,255,255,.2); padding:8px;">
            <div style="color:#9ca3af; font-size:12px; margin-bottom:4px;">Weekly Totals</div>
            <div style="display:grid; grid-template-columns: repeat(3, 1fr); gap:8px;">
              <div>
                <div style="font-weight:800; color:#7dd3fc; font-size:16px;" id="weekSites">0</div>
                <div style="color:#9ca3af; font-size:10px;">Sites</div>
              </div>
              <div>
                <div style="font-weight:800; color:#7dd3fc; font-size:16px;" id="weekScams">0</div>
                <div style="color:#9ca3af; font-size:10px;">Scams</div>
              </div>
              <div>
                <div style="font-weight:800; color:#7dd3fc; font-size:16px;" id="weekWarnings">0</div>
                <div style="color:#9ca3af; font-size:10px;">Warnings</div>
              </div>
            </div>
            <div style="display:flex; gap:6px; margin-top:6px;">
              <button id="exportTodayBtn" class="btn" style="flex:1; padding:6px 8px; background:linear-gradient(90deg,#0ea5e9,#22c55e);">Export Today</button>
              <button id="exportWeekBtn" class="btn" style="flex:1; padding:6px 8px; background:linear-gradient(90deg,#6366f1,#a855f7);">Export Week</button>
            </div>
            <div style="display:flex; gap:6px; margin-top:6px;">
              <button id="exportWeekPdfBtn" class="btn" style="flex:1; padding:6px 8px; background:linear-gradient(90deg,#0ea5e9,#7c3aed);">Export Week (PDF)</button>
              <button id="exportWeekDocBtn" class="btn" style="flex:1; padding:6px 8px; background:linear-gradient(90deg,#22c55e,#a855f7);">Export Week (Word)</button>
            </div>
          </div>
        </div>
      </div>

      <div class="card" style="margin-bottom: 12px;">
        <div class="label">CURRENT PAGE</div>
        <div id="currentRow" style="display:flex;justify-content:space-between;align-items:center;gap:8px;flex-wrap:wrap;">
          <div style="min-width:0;flex:1 1 160px;">
            <div id="currentTitle" style="font-size:12px; color:#9ca3af; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; max-width:100%;"></div>
            <div id="currentRisk" style="font-weight:800; margin-top:4px; word-break:break-word; overflow-wrap:anywhere;"></div>
          </div>
          <div style="display:flex; gap:6px; flex-wrap:wrap; justify-content:flex-end; flex:0 1 100%;">
            <button id="flagBtn" class="btn" style="width:auto; padding:6px 10px; background:linear-gradient(90deg,#db2777,#7c3aed)">FLAG</button>
            <button id="exportPageBtn" class="btn" style="width:auto; padding:6px 10px; background:linear-gradient(90deg,#0ea5e9,#22c55e)">EXPORT</button>
            <button id="rescanBtn" class="btn" style="width:auto; padding:6px 10px;">RESCAN</button>
          </div>
        </div>
      </div>

      <div class="card" style="margin-bottom: 12px;">
        <div class="label">SETTINGS</div>
        <div style="display:flex; align-items:center; justify-content:space-between; gap:8px; margin-top:6px;">
          <label style="display:flex; align-items:center; gap:8px;">
            <input type="checkbox" id="toggleHighlights" />
            <span style="font-size:12px; color:#d1d5db">Inline Highlights</span>
          </label>
          <div style="display:flex; align-items:center; gap:6px;">
            <span style="font-size:12px; color:#9ca3af">Sensitivity</span>
            <input type="range" id="sensitivity" min="50" max="150" value="100" />
          </div>
        </div>
      </div>

      <textarea id="input" placeholder="Paste suspicious message here..."></textarea>
      <div style="display:flex; gap:6px;">
        <button class="btn" id="scanBtn">INITIATE SCAN</button>
        <button class="btn" id="exportMsgBtn" style="background:linear-gradient(90deg,#0ea5e9,#22c55e)">EXPORT</button>
      </div>

      <div class="card" id="results" style="margin-top: 12px; display:none">
        <div class="label">THREAT CLASSIFICATION</div>
        <div class="classification" id="cls"></div>
        <div class="grid">
          <div class="card">
            <div class="label">CATEGORY</div>
            <div class="val" id="category"></div>
          </div>
          <div class="card">
            <div class="label">CONFIDENCE</div>
            <div class="val" id="confidence"></div>
          </div>
        </div>
        <div class="card" style="margin-top: 10px;">
          <div class="label">INDICATORS</div>
          <div class="list" id="indicators"></div>
        </div>
        <div class="small"><span id="time"></span><span>Neural Net v2.1.4</span></div>
      </div>

      <div class="card" style="margin-top: 12px;">
        <div class="label">RECENT ANALYSES</div>
        <div class="recent" id="recent"></div>
      </div>

      <div class="card" style="margin-top: 12px;">
        <div class="label">TODAY'S LOGS</div>
        <div style="display:flex; justify-content:flex-end; align-items:center; gap:8px; margin:6px 0 4px; font-size:12px; color:#9ca3af;">
          <label style="display:flex; align-items:center; gap:6px; cursor:pointer;">
            <input id="alertsOnly" type="checkbox" />
            Alerts Only
          </label>
        </div>
        <div class="recent" id="todayLogs"></div>
        <div style="display:flex; gap:6px; margin-top:8px;">
          <button id="exportLogsPdfBtn" class="btn" style="flex:1; padding:6px 8px; background:linear-gradient(90deg,#0ea5e9,#7c3aed);">Export Logs (PDF)</button>
          <button id="exportLogsDocBtn" class="btn" style="flex:1; padding:6px 8px; background:linear-gradient(90deg,#22c55e,#a855f7);">Export Logs (Word)</button>
        </div>
      </div>

      <div class="card" style="margin-top: 12px;">
        <div class="label">BLOCKLIST MANAGER</div>
        <div id="blocklist" class="recent"></div>
      </div>
    </div>
    <script src="analyzer-shared.js"></script>
    <script type="module" src="popup.js"></script>
  </body>
</html>
